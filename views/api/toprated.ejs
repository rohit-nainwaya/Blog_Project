<% layout('layouts/boilerplate2') %>
<body>
    <!-- Hero Section -->
    <div class="hero-section">
        <div class="hero-overlay"></div>
        <div class="hero-content">
            <h1 class="hero-title">Top Rated Movies</h1>
            <p class="hero-subtitle">The highest-rated films of all time</p>
        </div>
    </div>

    <!-- Filter & Sort Section -->
    <div class="container mt-4">
        <div class="filter-bar">
            <div class="row g-3 align-items-center">
                <div class="col-md-4">
                    <select class="form-select filter-select" id="sortBy">
                        <option value="rating">Sort by Rating</option>
                        <option value="popularity">Sort by Popularity</option>
                        <option value="release_date">Sort by Release Date</option>
                        <option value="title">Sort by Title</option>
                    </select>
                </div>
                <div class="col-md-4">
                    <select class="form-select filter-select" id="genreFilter">
                        <option value="">All Genres</option>
                        <!-- Will be populated dynamically -->
                    </select>
                </div>
                <div class="col-md-4">
                    <div class="view-toggle">
                        <button class="view-btn active" data-view="grid">
                            <i class="fas fa-th"></i>
                        </button>
                        <button class="view-btn" data-view="list">
                            <i class="fas fa-list"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <div class="container-fluid px-0">
        <div class="container mt-4">
            <!-- Loading Skeleton -->
            <div id="loadingSkeleton" class="movie-grid">
                <div class="skeleton-card" style="--delay: 0s;"></div>
                <div class="skeleton-card" style="--delay: 0.1s;"></div>
                <div class="skeleton-card" style="--delay: 0.2s;"></div>
                <div class="skeleton-card" style="--delay: 0.3s;"></div>
                <div class="skeleton-card" style="--delay: 0.4s;"></div>
                <div class="skeleton-card" style="--delay: 0.5s;"></div>
            </div>

            <!-- Movies Grid -->
            <div class="movie-grid" id="movieGrid"></div>

            <!-- Movie Details Modal -->
            <div id="movieDetails" class="modal-overlay hidden">
                <div class="modal-content-wrapper">
                    <button id="closeDetails" class="modal-close" onclick="goBack()">
                        <i class="fas fa-times"></i>
                    </button>
                    
                    <div class="detail-backdrop"></div>
                    
                    <div class="detail-content">
                        <div class="container">
                            <div class="row g-4">
                                <!-- Poster Column -->
                                <div class="col-lg-4">
                                    <div class="poster-wrapper">
                                        <img id="moviePoster" src="/assets/home_page/alt.jpg" alt="poster" class="detail-poster">
                                        <div class="rating-badge">
                                            <i class="fas fa-star"></i>
                                            <span id="ratingBadge">0</span>
                                        </div>
                                        <div class="toprated-badge">
                                            <i class="fas fa-crown"></i>
                                            <span>Top Rated</span>
                                        </div>
                                    </div>
                                    
                                    <div class="action-buttons mt-3">
                                        <a id="ottLink" href="#" class="btn-custom btn-primary" target="_blank">
                                            <i class="fas fa-play"></i> Watch Now
                                        </a>
                                        <button class="btn-custom btn-secondary" onclick="goBack()">
                                            <i class="fas fa-arrow-left"></i> Back
                                        </button>
                                    </div>

                                    <div class="movie-stats mt-4">
                                        <div class="stat-item">
                                            <i class="fas fa-clock"></i>
                                            <span id="movieRuntime"></span>
                                        </div>
                                        <div class="stat-item">
                                            <i class="fas fa-calendar"></i>
                                            <span id="movieRelease"></span>
                                        </div>
                                        <div class="stat-item">
                                            <i class="fas fa-globe"></i>
                                            <span id="movieCountry"></span>
                                        </div>
                                    </div>
                                </div>

                                <!-- Info Column -->
                                <div class="col-lg-8">
                                    <div class="movie-header">
                                        <h1 id="movieTitle" class="movie-title"></h1>
                                        <div class="movie-meta">
                                            <span id="movieGenres" class="genres"></span>
                                        </div>
                                    </div>

                                    <p id="movieDescription" class="movie-description"></p>

                                    <div class="movie-credits">
                                        <div class="credit-item">
                                            <span class="credit-label">Director:</span>
                                            <span id="movieDirector" class="credit-value"></span>
                                        </div>
                                        <div class="credit-item">
                                            <span class="credit-label">Production:</span>
                                            <span id="movieProduction" class="credit-value"></span>
                                        </div>
                                    </div>

                                    <!-- Trailer Section -->
                                    <div class="section-block trailer-section">
                                        <h3 class="section-title">
                                            <i class="fas fa-film"></i> Trailer
                                        </h3>
                                        <div class="iframe-container">
                                            <iframe id="movieTrailer" src="" allowfullscreen></iframe>
                                        </div>
                                    </div>

                                    <!-- Cast Section -->
                                    <div class="section-block">
                                        <h3 class="section-title">
                                            <i class="fas fa-users"></i> Cast
                                        </h3>
                                        <div id="castList" class="cast-carousel"></div>
                                    </div>

                                    <!-- Where to Watch -->
                                    <div class="section-block">
                                        <h3 class="section-title">
                                            <i class="fas fa-tv"></i> Where to Watch
                                        </h3>
                                        <div id="watchProvidersList" class="providers-list"></div>
                                    </div>

                                    <!-- Similar Movies -->
                                    <div class="section-block">
                                        <h3 class="section-title">
                                            <i class="fas fa-heart"></i> Similar Movies
                                        </h3>
                                        <div id="similarRow" class="similar-carousel"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/axios@1.6.7/dist/axios.min.js"></script>
    <script src="/JS/toprated.js"></script>
</body>
</html>